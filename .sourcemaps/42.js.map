{"version":3,"sources":["../../src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.module.ts","../../src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.ts"],"names":[],"mappings":"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","file":"42.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CurtainSettingHuaianPage } from './curtain-setting-huaian';\nimport { ComponentsModule } from '../../../components/components.module';\n\n@NgModule({\n  declarations: [\n    CurtainSettingHuaianPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CurtainSettingHuaianPage),\n    ComponentsModule\n  ],\n})\nexport class CurtainSettingHuaianPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, ModalController } from 'ionic-angular';\nimport { Variable } from '../../../providers/model/variable';\nimport { DeviceRequestsProvider } from '../../../providers/tools/requests';\nimport { ToolsProvider } from '../../../providers/tools/tools'\n\n/**\n * Generated class for the CurtainSettingHuaianPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-curtain-setting-huaian',\n  templateUrl: 'curtain-setting-huaian.html',\n})\nexport class CurtainSettingHuaianPage {\n\n  name: string;\n  id: number;\n  state: number;\n  auto: boolean;\n  fnID: string;\n  saturation: number = 0;\n  monitorID: number;\n  curtainInfo: any = {\n    openFnID: 0,\n    timerSetFnID: 0,\n    timerRoadID: 0,\n    timerGetFnID: 0\n  };\n  isNotQunKong:boolean=true;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private events: Events,\n    private device: DeviceRequestsProvider,\n    public modalCtrl: ModalController,\n    public tools: ToolsProvider,\n\n  ) {\n    this.id = this.navParams.get(\"id\");\n    this.name = this.navParams.get(\"name\");\n    this.monitorID = this.navParams.get(\"monitorID\");\n    if(this.id==77){\n      this.isNotQunKong=false;\n    }\n    this.getCurtainInfo();\n\n    if(this.isNotQunKong){\n      this.fnID = 'state';\n      let fnData = Variable.GetFnData(this.fnID);\n      this.getDeviceState1(fnData);\n      this.events.subscribe(`FnData:${this.fnID}`, this.eventsFn51Handler);\n      Variable.socketObject.getFnData(\"13\",this.monitorID);\n    }\n\n  }\n\n  private eventsFn51Handler = (data: any) => {\n    this.getDeviceState1(data);\n  }\n  /**end***/\n\n  getDeviceState1(data: any) {\n    if (data) {\n      // this.state = data[this.id][0];\n      let type1Data = Number(data[this.id][0]);\n\n      if (this.setInfo) {\n        if (this.setInfo.type == \"type1\") {\n          if (this.setInfo.value == type1Data) {\n            if (type1Data >= 10) {\n              this.state = type1Data;\n              this.saturation = type1Data-10;\n            } else {\n              this.state = type1Data;\n              this.saturation = 0;\n            }\n            this.dismissLoading();\n          }\n        }\n      } else {\n        if (type1Data >= 10) {\n          this.state = type1Data;\n          this.saturation = type1Data-10;\n        } else {\n          this.state = type1Data;\n          this.saturation = 0;\n        }\n\n      }\n    }\n  }\n  //获取窗帘设置和获取信息\n  getCurtainInfo() {\n    switch (this.id) {\n      case 71:case 78: {//遮阳顶棚\n        this.curtainInfo = {\n          openFnID: 37,\n          openSetPipe: 16,\n          timerSetFnID: 38,\n          timerRoadID: 5,\n          timerGetFnID: 13\n        };\n        break;\n      }\n      case 72: case 79: {//东帘\n        this.curtainInfo = {\n          openFnID: 37,\n          openSetPipe: 1,\n          timerSetFnID: 38,\n          timerRoadID: 1,\n          timerGetFnID: 13\n        };\n        break;\n      }\n      case 73: case 80:  {//南帘\n        this.curtainInfo = {\n          openFnID: 37,\n          openSetPipe: 2,\n          timerSetFnID: 38,\n          timerRoadID: 2,\n          timerGetFnID: 13\n        };\n        break;\n      }\n      case 74: case 81: {//西帘\n        this.curtainInfo = {\n          openFnID: 37,\n          openSetPipe: 4,\n          timerSetFnID: 38,\n          timerRoadID: 3,\n          timerGetFnID: 13\n        };\n        break;\n      }\n      case 75: case 82: {//北\n        this.curtainInfo = {\n          openFnID: 37,\n          openSetPipe: 8,\n          timerSetFnID: 38,\n          timerRoadID: 4,\n          timerGetFnID: 13\n        };\n        break;\n      }\n      case 76: case 83: {//照明\n        this.curtainInfo = {\n          openFnID: 37,\n          openSetPipe: 32,\n          timerSetFnID: 38,\n          timerRoadID: 6,\n          timerGetFnID: 13\n        };\n        break;\n      }\n      case 77: case 84:  {//群控\n        this.curtainInfo = {\n          openFnID: 37,\n          openSetPipe: 0,\n          timerSetFnID: 38,\n          // timerRoadID: 1,\n          // timerGetFnID: 25\n        };\n        break;\n      }\n\n\n\n    }\n\n  }\n\n  ionViewDidLoad() {\n  }\n  getDeviceState(data: any) {\n    if (data) {\n      let state = data.F728;\n      let kaidu = data.F727;\n\n      if (this.setInfo) {\n        if (kaidu == this.setInfo.kaidu && state == this.setInfo.state) {\n\n          // this.state = state;\n          this.saturation = kaidu;\n          this.dismissLoading();\n\n        }\n      } else {\n        // this.state = state;\n        this.saturation = kaidu;\n      }\n\n    }\n  }\n  dismissLoading() {\n    this.setInfo = null;\n    Variable.socketObject.dismissLoading();\n  }\n\n  setInfo: any;\n  setDeviceState(num) {\n    this.setInfo = {\n      type: 'type1',\n      value: num,\n    };\n    this.state=num;\n    let controData = `${this.curtainInfo.openSetPipe},${num}`;\n    Variable.socketObject.sendMessage(this.monitorID, this.curtainInfo.openFnID, controData,this.isNotQunKong);\n\n  }\n\n  ionViewWillUnload() {\n    this.events.unsubscribe(`FnData:${this.fnID}`, this.eventsFn51Handler);\n\n  }\n\n\n  rangeChange() {\n    let setKaiduValue = this.saturation * 1 + 10;\n    this.setInfo = {\n      type: 'type1',\n      value: setKaiduValue,\n    };\n    let controData = `${this.curtainInfo.openSetPipe},${setKaiduValue}`;\n    Variable.socketObject.sendMessage(this.monitorID, this.curtainInfo.openFnID, controData, this.isNotQunKong);\n\n\n  }\n  presentShowModal() {\n    let profileModal = this.modalCtrl.create('DeviceCurtainTimerPage', { name: this.name, curtainInfo: this.curtainInfo, monitorID: this.monitorID });\n    profileModal.onDidDismiss(data => {\n    });\n    profileModal.present();\n  }\n\n  // setDeviceState(state: any) {\n  //   this.state = state;\n  //   Variable.socketObject.setDeviceStateAndMonitorID(this.id, this.name, state, this.monitorID);\n  // }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.ts"],"sourceRoot":""}