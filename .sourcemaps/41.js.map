{"version":3,"sources":["../../src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.module.ts","../../src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACoB;AACK;AAWzE;IAAA;IAA8C,CAAC;IAAlC,8BAA8B;QAT1C,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,yFAAwB;aACzB;YACD,OAAO,EAAE;gBACP,8DAAe,CAAC,QAAQ,CAAC,yFAAwB,CAAC;gBAClD,uFAAgB;aACjB;SACF,CAAC;OACW,8BAA8B,CAAI;IAAD,qCAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;;ACdD;AACwC;AACrB;AACa;AAE1E;;;;;GAKG;AAOH;IAgBE,kCAAmB,OAAsB,EAAS,SAAoB,EAC5D,MAAc,EACd,MAA8B,EAC/B,SAA0B;QAHnC,iBAiBC;QAjBkB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAC5D,WAAM,GAAN,MAAM,CAAQ;QACd,WAAM,GAAN,MAAM,CAAwB;QAC/B,cAAS,GAAT,SAAS,CAAiB;QAZnC,eAAU,GAAW,CAAC,CAAC;QAEvB,gBAAW,GAAQ;YACjB,QAAQ,EAAE,CAAC;YACX,YAAY,EAAE,CAAC;YACf,WAAW,EAAE,CAAC;YACd,YAAY,EAAE,CAAC;SAChB,CAAC;QAqBM,sBAAiB,GAAG,UAAC,IAAS;YACpC,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;QAC7B,CAAC;QAfC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QACvC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACjD,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,2EAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAG/E,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC;QACpB,IAAI,MAAM,GAAG,2EAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC3C,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;QAC7B,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,YAAU,IAAI,CAAC,IAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;IACvE,CAAC;IAKD,UAAU;IAEV,kDAAe,GAAf,UAAgB,IAAS;QACvB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;QAChC,CAAC;IACH,CAAC;IACD,aAAa;IACb,iDAAc,GAAd;QACE,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,CAAC;YACzB,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;gBAChB,KAAK,EAAE,EAAE,CAAC;oBACR,IAAI,CAAC,WAAW,GAAG;wBACjB,QAAQ,EAAE,EAAE;wBACZ,YAAY,EAAE,EAAE;wBAChB,WAAW,EAAE,CAAC;wBACd,YAAY,EAAE,CAAC;qBAChB,CAAC;oBACF,KAAK,CAAC;gBACR,CAAC;gBACD,KAAK,EAAE,EAAE,CAAC;oBACR,IAAI,CAAC,WAAW,GAAG;wBACjB,QAAQ,EAAE,EAAE;wBACZ,YAAY,EAAE,EAAE;wBAChB,WAAW,EAAE,CAAC;wBACd,YAAY,EAAE,CAAC;qBAChB,CAAC;oBACF,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;QAEH,CAAC;QAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,IAAI,EAAE,IAAI,IAAI,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,CAAC;YACxD,MAAM,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;gBAChB,KAAK,EAAE,CAAC;gBAAC,KAAK,EAAE,EAAE,CAAC;oBACjB,IAAI,CAAC,WAAW,GAAG;wBACjB,QAAQ,EAAE,EAAE;wBACZ,YAAY,EAAE,EAAE;wBAChB,WAAW,EAAE,CAAC;wBACd,YAAY,EAAE,EAAE;qBACjB,CAAC;oBACF,KAAK,CAAC;gBACR,CAAC;gBACD,KAAK,EAAE,CAAC;gBAAC,KAAK,EAAE,EAAE,CAAC;oBACjB,IAAI,CAAC,WAAW,GAAG;wBACjB,QAAQ,EAAE,EAAE;wBACZ,YAAY,EAAE,EAAE;wBAChB,WAAW,EAAE,CAAC;wBACd,YAAY,EAAE,EAAE;qBACjB,CAAC;oBACF,KAAK,CAAC;gBACR,CAAC;gBACD,KAAK,EAAE,CAAC;gBAAC,KAAK,EAAE,EAAE,CAAC;oBACjB,IAAI,CAAC,WAAW,GAAG;wBACjB,QAAQ,EAAE,EAAE;wBACZ,YAAY,EAAE,EAAE;wBAChB,WAAW,EAAE,CAAC;wBACd,YAAY,EAAE,EAAE;qBACjB,CAAC;oBACF,KAAK,CAAC;gBACR,CAAC;YACH,CAAC;QACH,CAAC;IACH,CAAC;IAED,iDAAc,GAAd;IACA,CAAC;IACD,iDAAc,GAAd,UAAe,IAAS;QACtB,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YACT,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;YACtB,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC;YAEtB,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACjB,EAAE,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;oBAC/D,YAAY;oBAEZ,sBAAsB;oBACtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;oBACxB,IAAI,CAAC,cAAc,EAAE,CAAC;gBAExB,CAAC;YACH,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,sBAAsB;gBACtB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;YAC1B,CAAC;QAEH,CAAC;IACH,CAAC;IACD,iDAAc,GAAd;QACE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,2EAAQ,CAAC,YAAY,CAAC,cAAc,EAAE,CAAC;IACzC,CAAC;IAGD,iDAAc,GAAd,UAAe,GAAG;QAChB,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;YACZ,KAAK,CAAC,EAAE,CAAC;gBAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBAAC,KAAK,CAAC;YAAC,CAAC;YAClC,KAAK,CAAC,EAAE,CAAC;gBAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBAAC,KAAK,CAAC;YAAC,CAAC;YAClC,KAAK,CAAC,EAAE,CAAC;gBAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;gBAAC,KAAK,CAAC;YAAC,CAAC;QACpC,CAAC;QACD,2EAAQ,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;IAEpF,CAAC;IAED,oDAAiB,GAAjB;QACE,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,YAAU,IAAI,CAAC,IAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAEzE,CAAC;IAGD,8CAAW,GAAX;QAAA,iBAgBC;QAfC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;YACnB,IAAI,CAAC,QAAQ,GAAG,UAAU,CAAC;gBACzB,OAAO,CAAC,GAAG,CAAC,KAAI,CAAC,UAAU,CAAC,CAAC;gBAC7B,2EAAQ,CAAC,YAAY,CAAC,WAAW,CAAC,KAAI,CAAC,SAAS,EAAE,KAAI,CAAC,WAAW,CAAC,QAAQ,EAAE,KAAI,CAAC,UAAU,GAAG,CAAC,GAAG,EAAE,EAAE,KAAK,CAAC,CAAC;gBAI9G,gCAAgC;gBAChC,2CAA2C;gBAC3C,YAAY,CAAC,KAAI,CAAC,QAAQ,CAAC,CAAC;gBAC5B,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;YACvB,CAAC,EAAE,GAAG,CAAC,CAAC;QACV,CAAC;IAGH,CAAC;IACD,mDAAgB,GAAhB;QACE,IAAI,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,wBAAwB,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,SAAS,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;QAClJ,YAAY,CAAC,YAAY,CAAC,cAAI;QAC9B,CAAC,CAAC,CAAC;QACH,YAAY,CAAC,OAAO,EAAE,CAAC;IACzB,CAAC;IAzKU,wBAAwB;QAJpC,gEAAS,CAAC;YACT,QAAQ,EAAE,6BAA6B;WACG;SAC3C,CAAC;kEAiBsE;YACpD,yFAAM;YACN,gEAAsB;YACpB,eAAe;OAnBxB,wBAAwB,CA2KpC;IAAD,CAAC;AAAA;SA3KY,wBAAwB,iB","file":"41.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { CurtainSettingHuaianPage } from './curtain-setting-huaian';\nimport { ComponentsModule } from '../../../components/components.module';\n\n@NgModule({\n  declarations: [\n    CurtainSettingHuaianPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(CurtainSettingHuaianPage),\n    ComponentsModule\n  ],\n})\nexport class CurtainSettingHuaianPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, ModalController } from 'ionic-angular';\nimport { Variable } from '../../../providers/model/variable';\nimport { DeviceRequestsProvider } from '../../../providers/tools/requests'\n\n/**\n * Generated class for the CurtainSettingHuaianPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-curtain-setting-huaian',\n  templateUrl: 'curtain-setting-huaian.html',\n})\nexport class CurtainSettingHuaianPage {\n\n  name: string;\n  id: number;\n  state: number;\n  auto: boolean;\n  fnID: string;\n  saturation: number = 0;\n  monitorID: number;\n  curtainInfo: any = {\n    openFnID: 0,\n    timerSetFnID: 0,\n    timerRoadID: 0,\n    timerGetFnID: 0\n  };\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private events: Events,\n    private device: DeviceRequestsProvider,\n    public modalCtrl: ModalController,\n\n  ) {\n    this.id = this.navParams.get(\"id\");\n    this.name = this.navParams.get(\"name\");\n    this.monitorID = this.navParams.get(\"monitorID\");\n    this.getCurtainInfo();\n    Variable.socketObject.getFnData(this.curtainInfo.timerGetFnID, this.monitorID);\n\n\n    this.fnID = 'state';\n    let fnData = Variable.GetFnData(this.fnID);\n    this.getDeviceState1(fnData);\n    this.events.subscribe(`FnData:${this.fnID}`, this.eventsFn51Handler);\n  }\n\n  private eventsFn51Handler = (data: any) => {\n    this.getDeviceState1(data);\n  }\n  /**end***/\n\n  getDeviceState1(data: any) {\n    if (data) {\n      this.state = data[this.id][0];\n    }\n  }\n  //获取窗帘设置和获取信息\n  getCurtainInfo() {\n    if (this.monitorID == 16) {\n      switch (this.id) {\n        case 59: {\n          this.curtainInfo = {\n            openFnID: 21,\n            timerSetFnID: 23,\n            timerRoadID: 1,\n            timerGetFnID: 9\n          };\n          break;\n        }\n        case 60: {\n          this.curtainInfo = {\n            openFnID: 22,\n            timerSetFnID: 23,\n            timerRoadID: 2,\n            timerGetFnID: 9\n          };\n          break;\n        }\n      }\n\n    } else if (this.monitorID == 17 || this.monitorID == 18) {\n      switch (this.id) {\n        case 71: case 74: {\n          this.curtainInfo = {\n            openFnID: 33,\n            timerSetFnID: 36,\n            timerRoadID: 1,\n            timerGetFnID: 11\n          };\n          break;\n        }\n        case 72: case 75: {\n          this.curtainInfo = {\n            openFnID: 34,\n            timerSetFnID: 36,\n            timerRoadID: 2,\n            timerGetFnID: 11\n          };\n          break;\n        }\n        case 73: case 76: {\n          this.curtainInfo = {\n            openFnID: 35,\n            timerSetFnID: 36,\n            timerRoadID: 3,\n            timerGetFnID: 11\n          };\n          break;\n        }\n      }\n    }\n  }\n\n  ionViewDidLoad() {\n  }\n  getDeviceState(data: any) {\n    if (data) {\n      let state = data.F728;\n      let kaidu = data.F727;\n\n      if (this.setInfo) {\n        if (kaidu == this.setInfo.kaidu && state == this.setInfo.state) {\n          // debugger;\n\n          // this.state = state;\n          this.saturation = kaidu;\n          this.dismissLoading();\n\n        }\n      } else {\n        // this.state = state;\n        this.saturation = kaidu;\n      }\n\n    }\n  }\n  dismissLoading() {\n    this.setInfo = null;\n    Variable.socketObject.dismissLoading();\n  }\n\n  setInfo: any;\n  setDeviceState(num) {\n    switch (num) {\n      case 1: { this.state = 1; break; }\n      case 2: { this.state = 0; break; }\n      case 3: { this.state = 2; break; }\n    }\n    Variable.socketObject.sendMessage(this.monitorID, this.curtainInfo.openFnID, num);\n\n  }\n\n  ionViewWillUnload() {\n    this.events.unsubscribe(`FnData:${this.fnID}`, this.eventsFn51Handler);\n\n  }\n\n  timerObj: any;\n  rangeChange() {\n    if (!this.timerObj) {\n      this.timerObj = setTimeout(() => {\n        console.log(this.saturation);\n        Variable.socketObject.sendMessage(this.monitorID, this.curtainInfo.openFnID, this.saturation * 1 + 10, false);\n\n\n\n        // console.log(this.saturation);\n        // this.setDeviceState(this.saturation, 1);\n        clearTimeout(this.timerObj);\n        this.timerObj = null;\n      }, 500);\n    }\n\n\n  }\n  presentShowModal() {\n    let profileModal = this.modalCtrl.create('DeviceCurtainTimerPage', { name: this.name, curtainInfo: this.curtainInfo, monitorID: this.monitorID });\n    profileModal.onDidDismiss(data => {\n    });\n    profileModal.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/device-setting/curtain-setting-huaian/curtain-setting-huaian.ts"],"sourceRoot":""}